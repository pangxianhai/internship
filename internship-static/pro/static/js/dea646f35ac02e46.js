/*coolie built*/
define("0",["1","5","a","b","6","7","e","c"],function(t){var e,n,a,d,i,s,c=t("1");t("5");t("a");e=t("b");n=t("6");a=t("7");d=t("e");i=t("c");s={data:{},push_student_info:function(t){var e,a,d=[];for(e=0;e<t.length;++e){a=t[e];d.push("<tr>");d.push('<td><input item="select_student"  type="checkbox" companyId="'+a.companyId+'" destId="'+a.desId+'" universityDesId="'+a.universityDesId+'" collegeDesId="'+a.collegeDesId+'" departmentDesId="'+a.departmentDesId+'" specialityDesId="'+a.specialityDesId+'" /></td>');d.push("<td>"+a.studentNumber+"</td>");d.push("<td>"+a.name+"</td>");d.push("<td>"+a.userInfo.phone+"</td>");d.push("<td>"+a.userInfo.sex.desc+"</td>");d.push("<td>"+a.universityDepartmentInfo+"</td>");d.push("<td>"+a.grade+"</td>");d.push("<td>");n.isEmpty(a.teacherId)?d.push("-"):d.push(a.teacherName);d.push("</td>");d.push('<td title="'+n.filterNull(a.companyName)+'">');n.isEmpty(a.companyId)?d.push("-"):d.push(n.substring(a.companyName,5));d.push("</td>");d.push("<td>");n.isEmpty(a.tutorId)?d.push("-"):d.push(a.tutorName);d.push("</td>");d.push('<td title="'+n.filterNull(a.expectCompany)+'">'+n.substring(a.expectCompany,5)+"</td>");d.push('<td title="'+n.filterNull(a.remark)+'">'+n.substring(a.remark,5)+"</td>");d.push("<td>"+new Date(a.createdTime).format("yyyy-MM-dd")+"</td>");d.push('<td class="operator">');if(this.data.can_change_company){d.push('<a href="/company/list.htm?action=addStudent&studentId='+a.desId+'">');n.isEmpty(a.companyId)?d.push("[分配实习单位]"):d.push("[修改实习单位]");d.push("</a><br/>")}if(this.data.can_change_tutor){d.push('<a href="/tutor/list.htm?action=addStudent&studentId='+a.desId+"&companyId="+a.companyId+'">');n.isEmpty(a.tutorId)?d.push("[分配导师]"):d.push("[修改导师]");d.push("</a><br/>")}if(this.data.can_change_teacher){d.push('<a href="/teacher/list.htm?action=addStudent&studentId='+a.desId+'">');n.isEmpty(a.teacherId)?d.push("[分配带队老师]"):d.push("[修改带队老师]");d.push("</a></br>")}this.data.can_delete_student&&d.push('<a item="delete" destId="'+a.desId+'" href="javascript:void(0)" >[删除]</a><br/>');d.push("</td");d.push("</tr>")}return d.join("")},push_page_data:function(t){if(t.ret){c("#u_data").html(s.push_student_info(t.data.students));c(".page_list").html(e.html(t.data.page));e.turning_page(s.load_student_info);s.bind_delete_action()}},load_student_info:function(t){c.ajax({url:"/student/list.json",type:"POST",data:c.extend(n.getFormData(c("#search_form")),{currentPage:t}),dataType:"json",beforeSend:function(){},success:s.push_page_data})},delete_student:function(t,n){c.ajax({url:"/student/delete.json",type:"POST",dataType:"json",data:{destIds:t},success:function(t){if(t.ret){t.data<n?a.openSample("提示","部分学生删除未成功，您这个只删除了"+t.data+"个学生"):a.openSample("提示","操作成功");s.load_student_info(e.current_page());a.close(2e3)}else a.openSample("提示",t.message)}})},bind_search_register_timer_action:function(){c('[name="beginTimeStr"]').click(function(){d.WdatePicker({dateFmt:"yyyy-MM-dd",maxDate:"%y-%M-%d"})});c('[name="endTimeStr"]').click(function(){d.WdatePicker({dateFmt:"yyyy-MM-dd",minDate:c('[name="beginTimeStr"]').val(),maxDate:"%y-%M-%d"})})},bind_search_action:function(){i.initSelect({university:{selectNode:c('[name="universityDesId"]'),departmentId:""},college:{selectNode:c('[name="collegeDesId"]'),departmentId:""},department:{selectNode:c('[name="departmentDesId"]'),departmentId:""},speciality:{selectNode:c('[name="specialityDesId"]'),departmentId:""}});c("#search_action").click(function(){c('input[item="select_all"]').prop("checked",!1);s.load_student_info(1)})},bind_delete_action:function(){c('a[item="delete"]').unbind("click");c('a[item="delete"]').bind("click",function(){var t=c(this).attr("destId");a.yesNo("提示","您确定要删除该学生吗？",function(){s.delete_student(t,1)})})},bind_select_all_action:function(){c('input[item="select_all"]').click(function(){c('input[item="select_student"]').prop("checked",c(this).is(":checked"))})},bind_delete_all_action:function(){c("#delete_all").click(function(){var t=[];c('input[item="select_student"]:checked').each(function(){t.push(c(this).attr("destId"))});0!=t.length?a.yesNo("提示","您确定要删除选中的学生吗？",function(){s.delete_student(t.join(","),t.length)}):a.openSample("提示","请选择要删除的学生")})},bind_change_company_all_action:function(){c("#change_company_all").click(function(){var t=[];c('input[item="select_student"]:checked').each(function(){t.push(c(this).attr("destId"))});0!=t.length?a.yesNo("提示","批量分配，将所选学生全部分配（或修改）到同一个单位，您确定要执行次操作吗？",function(){window.location.href="/company/list.htm?action=addStudent&studentId="+t.join(",")}):a.openSample("提示","请选择要分配（或修改）的学生")})},bind_change_teacher_all_action:function(){c("#change_teacher_all").click(function(){var t,e,d,i,s=[],l=!0;c('input[item="select_student"]:checked').each(function(n){var a,u,o,r,p=c(this);s.push(p.attr("destId"));if(0==n){t=p.attr("universityDesId");e=p.attr("collegeDesId");d=p.attr("departmentDesId");i=p.attr("specialityDesId")}else{a=p.attr("universityDesId");u=p.attr("collegeDesId");o=p.attr("departmentDesId");r=p.attr("specialityDesId");if(t!==a||e!==u||d!==o||i!==r){l=!1;return!1}}});l||a.openSample("提示","请选择同学校同院系同专业的学生进行批量操作!");0!=s.length?a.yesNo("提示","批量分配，将所选学生全部分配（或修改）到同一个带队老师，您确定要执行次操作吗？",function(){window.location.href="/teacher/list.htm?action=addStudent&studentId="+s.join(",")+"&universityDesId="+n.filterNull(t)+"&collegeDesId="+n.filterNull(e)+"&departmentDesId="+n.filterNull(d)+"&specialityDesId="+n.filterNull(i)}):a.openSample("提示","请选择要分配（或修改）的学生")})},bind_change_tutor_all_action:function(){c("#change_tutor_all").click(function(){var t,e=[],d=[];c('input[item="select_student"]:checked').each(function(){e.push(c(this).attr("destId"));d.push(c(this).attr("companyId"))});if(0!=e.length){for(t=0;t<d.length;++t){if(n.isEmpty(d[t])){a.openSample("提示","您所选的学生有的未分配单位，请先为他们分配单位再执行该操作!");return}if(d[t]!=d[0]){a.openSample("提示","您所选的学生不属于同一单位，请选择同一单位的学生再执行该操作!");return}}a.yesNo("提示","批量分配，将所选学生全部分配（或修改）到同一个指导老师，您确定要执行次操作吗？",function(){window.location.href="/tutor/list.htm?action=addStudent&studentId="+e.join(",")+"&companyId="+d[0]})}else a.openSample("提示","请选择要分配（或修改）的学生")})},init:function(){this.data.can_change_company=c("#can_change_company").val();this.data.can_change_tutor=c("#can_change_tutor").val();this.data.can_change_teacher=c("#can_change_teacher").val();this.data.can_delete_student=c("#can_delete_student").val();this.load_student_info(1);this.bind_search_action();this.bind_select_all_action();this.bind_delete_all_action();this.bind_change_company_all_action();this.bind_search_register_timer_action();this.bind_change_teacher_all_action();this.bind_change_tutor_all_action()}};s.init()});
define("5",["1"],function(t,i,n){var e,o,s;t("1");e={init_choice:function(){var t=$("#menu_id").val();$(".menu_list").find("A").each(function(t){$(this);if(this.getAttribute("data")==t){$(this).addClass("current");$(this).removeClass("no_current")}else{$(this).addClass("no_current");$(this).removeClass("current")}},[t])}};o={timer:null,top:0,begin:function(t){o.timer=setInterval(function(){t.css("top",o.top+"px");o.top<-11?o.top=12:o.top-=1},180)},end:function(){null!=o.timer&&clearInterval(o.timer)}};s={tips_show:function(){o.begin($("#bulletin_head_tips"));$("#bulletin_head_tips").hover(function(){o.end()},function(){o.begin($("#bulletin_head_tips"))})}};$(function(){e.init_choice();s.tips_show()});i.get_title=function(){$(".menu").find(".title").val()}});
define("9",[],function(y,d,r){r.exports=".dialog-dialog_div{overflow:hidden;display:block;position:fixed;border:1px solid #3f55a0;border-top-right-radius:4px;border-top-left-radius:4px;z-index:1001}.dialog-dialog_div table{border-collapse:collapse;width:100%}.dialog-dialog_div .title{background-color:#3f55a0;overflow:hidden;display:block;height:30px;color:#FFF}.dialog-dialog_div .title span{line-height:35px;margin-left:8px;font-size:14px}.dialog-dialog_div .title .close{float:right;line-height:30px;font-size:25px;margin-right:10px;color:#FFF}.dialog-dialog_div .dialog_content{overflow:hidden;background-color:#FFF;padding-left:10px;word-break:break-all}.dialog-dialog_div .bottom{height:38px;overflow:hidden;background-color:#ccc}.dialog-dialog_div .bottom .no{float:left;margin-left:8px;border-radius:5px}.dialog-dialog_div .bottom .yes{float:right;margin-right:8px;border-radius:5px}"});
coolie.chunk(["0"]);