/*coolie built*/
define("0",["g","k","l","m","6","h"],function(t,e,n){var s,i=t("g"),a=t("k"),o=t("l"),l=t("m"),u=t("6");t("h");s={deleteStudent:function(t,e){i.ajax({url:"/student/delete.json",type:"POST",dataType:"json",data:{destIds:t},success:function(t){o.close_dialog();if(t.ret){t.data<e?o.push_ok_message("部分学生删除未成功，您这个只删除了"+t.data+"个学生"):o.push_ok_message("提示","操作成功");location.reload(!0)}else o.push_error_message(t.message)}})},bindStudentInfoScroll:function(){i('#studentList [item="studentShow"]').each(function(){var t,e,n=i(this);if("true"==n.attr("has_operate")){t=n.parent().find('[item="operate"]');e=t.width();new a({target_node:n,h_scroll:!0,max_scroll:e,start_event_callback:function(e){t.css("visibility","visible")},move_event_callback:function(t){},end_callback:function(s){var i=s.range,a=s.swipe_direction(i);if("_left"==a&&Math.abs(i.x1-i.x2)>=e/2)n.css({transform:"translate(-"+e+"px, 0px) scale(1) translateZ(0px)"});else{n.css({transform:"translate(0px, 0px) scale(1) translateZ(0px)"});t.css("visibility","hidden")}}})}})},pushStudentInfo:function(t){var e,n,s,i=[];for(e=0;e<t.length;++e){n=t[e];s=[];this.canChangeCompany&&s.push('<li class="company" item="assignCompany"><div class="assign">分配实习单位</div></li>');this.canChangeTeacher&&s.push('<li class="teacher" item="assignTeacher"><div class="assign">分配带队老师</div></li>');this.canChangeTutor&&s.push('<li class="tutor" item="assignTutor"><div class="assign">分配实习导师</div></li>');this.canDeleteStudent&&s.push('<li class="delete" item="delete">删除</li>');i.push('<li class="user_node" item="studentNode" studentDesId="'+n.desId+'">');i.push('<div class="operate" item="operate">');i.push('<ul class="operate_list">'+s+"</ul>");i.push("</div>");i.push('<div class="user_show" item="studentShow"  has_operate="'+(s.length>0)+'">');i.push('<ul class="user_info">');i.push("<li>"+n.name+"</li>");i.push("<li>"+n.studentNumber+"</li>");i.push("<li><span>"+n.userInfo.sex.desc+"</span><i>&gt;</i></li>");i.push("</ul>");i.push('<ul class="user_message">');i.push('<li class="_left">实习单位：</li>');i.push('<li class="_right">'+u.filterString(u.substring(n.companyName,5),"-")+"</li>");i.push('<li class="_left">实习导师：</li>');i.push('<li class="_right">'+u.filterString(n.tutorName,"-")+"</li>");i.push("</ul>");i.push('<ul class="user_message">');i.push('<li class="_left">带队老师：</li>');i.push('<li class="_right">'+u.filterString(n.teacherName,"-")+"</li>");i.push('<li class="_left">联系方式：</li>');i.push('<li class="_right">'+u.filterString(n.userInfo.phone,"-")+"</li>");i.push("</ul>");i.push("</div>");i.push("</li>");i.push("<hr/>")}return i.join("")},bindToStudentInfoDetailAction:function(){var t=i('#studentList [item="studentNode"]');t.off("click");t.on("click",function(){window.location.href="/webApp/student/detail/"+i(this).attr("studentDesId")+".htm?returnUrl="+encodeURIComponent(location.href)})},bindAssignTutorAction:function(){var t=i('#studentList [item="assignTutor"]');t.off("click");t.on("click",function(t){t.stopPropagation();var e=i(this).parents('[item="studentNode"]');window.location.href="/webApp/tutor/list.htm?action=addStudent&studentDesId="+e.attr("studentDesId")+"&returnUrl="+encodeURIComponent(location.href)})},bindAssignCompanyAction:function(){var t=i('#studentList [item="assignCompany"]');t.off("click");t.on("click",function(t){t.stopPropagation();var e=i(this).parents('[item="studentNode"]');window.location.href="/webApp/company/list.htm?action=addStudent&studentDesId="+e.attr("studentDesId")+"&returnUrl="+encodeURIComponent(location.href)})},bindAssignTeacherAction:function(){var t=i('#studentList [item="assignTeacher"]');t.off("click");t.on("click",function(t){t.stopPropagation();var e=i(this).parents('[item="studentNode"]');window.location.href="/webApp/teacher/list.htm?action=addStudent&studentDesId="+e.attr("studentDesId")+"&returnUrl="+encodeURIComponent(location.href)})},bindDeleteStudentAction:function(){var t=i('#studentList [item="delete"]');t.off("click");t.on("click",function(t){t.stopPropagation();var e=i(this).parents('[item="studentNode"]').attr("studentDesId");o.yes_no("您确定要删除该学生吗?",function(){s.deleteStudent(e,1)})})},loadStudentInfo:function(t){i.ajax({url:"/student/list.json",type:"POST",data:{currentPage:t},dataType:"json",beforeSend:function(){o.dialog_load("加载中...")},success:function(e){var n,a;o.close_dialog();if(e.ret){t<=1&&i("#studentList").html("");n=s.pushStudentInfo(e.data.students);i("#studentList").append(n);a=e.data.page;l.loadSinglePage(a.currentPage,a.totalPage,i("#studentList"),s.loadStudentInfo);s.bindStudentInfoScroll();s.bindToStudentInfoDetailAction();s.bindAssignTutorAction();s.bindAssignCompanyAction();s.bindAssignTeacherAction();s.bindDeleteStudentAction()}else o.push_error_message(e.message)}})},init:function(){this.canChangeCompany="true"==i("#canChangeCompany").val();this.canChangeTutor="true"==i("#canChangeTutor").val();this.canChangeTeacher="true"==i("#canChangeTeacher").val();this.canDeleteStudent="true"==i("#canDeleteStudent").val();this.loadStudentInfo(1)}};s.init()});
define("o",[],function(y,d,r){r.exports=".rDialog{position:fixed;_position:absolute}.rDialog-wrap{position:relative;background:#000;opacity:.7;background-clip:padding-box;border-radius:10px;-moz-border-radius:10px;-o-border-radius:10px;-webkit-border-radius:10px;box-shadow:1px 1px 1px #000;padding:.5em .5em}.rDialog-header-load{text-align:center;background:url(/static/images/0e6e0f46d7504242.gif);background-repeat:no-repeat;background-position:0 0;background-size:100%;width:30px;height:33px;margin:auto}.rDialog-header-alert,.rDialog-header-ok{text-align:center;background:url(/static/images/12dffd74007d31b6.png);background-repeat:no-repeat;background-size:100%;width:33px;height:36px;margin:auto}.rDialog-header-alert{background-position:0 -36px}.rDialog-header-ok{background-position:0 0}.rDialog-content{padding:1em 1em;font-size:1.1em;color:#FFF;overflow:hidden;text-align:center}.rDialog-footer{padding-left:15px;text-align:center}.rDialog-footer a{display:inline-block;margin:0 15px 15px 0;height:32px;line-height:32px;padding:0 30px;font-size:1rem;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}.rDialog-footer a:hover,.rDialog-footer a:link,.rDialog-footer a:visited{color:#fff;text-decoration:none}.rDialog-ok,.rDialog-ok:hover{background:#c70066;color:#fff}.rDialog-cancel,.rDialog-cancel:hover{background:#E6E6E6;color:#A7A7A7}.rDialog-mask{position:fixed;_position:absolute;left:0;top:0;width:100%;height:100%;background:#000;filter:alpha(opacity=30);opacity:.3}"});
define("h",["g","6"],function(i,t,e){var n,o;i("g");n=i("6");o={initPanel:function(){"true"==$("#show_header_left").val()?$("header .header .left").css("visibility","visible"):$("header .header .left").css("visibility","hidden");var i=$("#headerRight").html();n.isNotEmpty(i)&&$("header .header .right").html(i)},initFooterMenu:function(){var i=$("#footerMenuId").val();$("footer .footer_menu").find("."+i).addClass("active")},bindLeftBtnAction:function(){$("header .header .left a").click(function(){var i=$("#returnUrl").val();n.isNotEmpty(i)?window.location.href=i:window.history.go(-1)})},init:function(){this.initPanel();this.bindLeftBtnAction();this.initFooterMenu();$("body").height($("body")[0].clientHeight)}};$(function(){o.init()})});
coolie.chunk(["0"]);