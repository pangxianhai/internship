/*coolie built*/
define("0",["g","l","6","m","k","h"],function(s,t,e){var i,a=s("g"),l=s("l"),n=s("6"),o=s("m"),u=s("k");s("h");i={data:{action:"",isSysadmin:!1,isLeader:!1},pushTutorInfo:function(s){var t,e,i,a,l=[];for(t=0;t<s.length;++t){e=s[t];i=!1;a=[];if("addStudent"==this.data.action||this.data.isSysadmin||this.data.isLeader)if("addStudent"==this.data.action){i=!0;a.push('<li class="_tutor">');a.push('<div class="_assign">分配实习导师</div>');a.push("</li>")}else if(this.data.isSysadmin){i=!0;if(!e.isLeader){a.push('<li class="_tutor">');a.push('<div class="_assign">设为负责人</div>');a.push("</li>")}a.push('<li class="_delete">删除</li>')}else if(this.data.isLeader&&!e.isLeader){i=!0;a.push('<li class="_delete">删除</li>')}l.push('<li class="user_node" tutorDesId="'+e.desId+'" tutorName="'+e.name+'">');l.push('<div class="operate">');l.push('<ul class="operate_list">'+a.join("")+"</ul>");l.push("</div>");l.push('<div class="user_show" has_operate="'+i+'">');l.push('<ul class="user_info">');l.push("<li>"+e.name+"</li>");l.push("<li>"+e.department+"</li>");l.push("<li><span>"+e.tutorType.desc+"</span><i>&gt;</i></li>");l.push("</ul>");l.push('<ul class="user_message">');l.push('<li class="_left">实习单位：</li>');l.push('<li class="_right">'+e.companyName+"</li>");l.push('<li class="_left">实习人数：</li>');l.push('<li class="_right">'+n.filterString(e.studentNumber,"0")+"人</li>");l.push("</ul>");l.push('<ul class="user_message">');l.push('<li class="_left">性别：</li>');l.push('<li class="_right">'+e.userInfo.sex.desc+"</li>");l.push('<li class="_left">联系方式：</li>');l.push('<li class="_right">'+e.userInfo.phone+"</li>");l.push("</ul>");l.push("</ul>");l.push("</div>");l.push("</li>");l.push("<hr/>")}return l.join("")},bindTutorInfoScrollAction:function(){a("#tutorList .user_show").each(function(){var s,t,e=a(this);if("true"==e.attr("has_operate")){s=e.parent().find(".operate");t=s.width();new u({target_node:e,h_scroll:!0,max_scroll:t,start_event_callback:function(t){s.css("visibility","visible")},move_event_callback:function(s){},end_callback:function(i){var a=i.range,l=i.swipe_direction(a);if("_left"==l&&Math.abs(a.x1-a.x2)>=t/2)e.css({transform:"translate(-"+t+"px, 0px) scale(1) translateZ(0px)"});else{e.css({transform:"translate(0px, 0px) scale(1) translateZ(0px)"});s.css("visibility","hidden")}}})}})},bindToTutorDetailAction:function(){var s=a("#tutorList .user_node");s.off("click");s.on("click",function(){window.location.href="/webApp/tutor/detail/"+a(this).attr("tutorDesId")+".htm?returnUrl="+encodeURIComponent(location.href)})},bindAssignTutorAction:function(){var s=a("#tutorList .user_node .operate ._tutor");s.off("click");s.on("click",function(s){s.stopPropagation();var t=a(this).parents(".user_node");l.yes_no("你确定将学生"+a("#studentName").val()+"分配到"+t.attr("tutorName")+"吗?",function(){a.ajax({url:"/student/updateTutor.json",type:"POST",dataType:"json",data:{tutorDestId:t.attr("tutorDesId"),studentDestId:a("#studentDestId").val()},success:function(s){if(s.ret){s.data==a("#studentDestId").val().split(",").length?l.push_ok_message("分配成功"):l.push_ok_message("部分学生操作成功，您这个成功操作了"+s.data+"个学生");setTimeout(function(){window.location.href=a("#returnUrl").val()},2e3)}else l.push_error_message(s.message)}})})})},loadTutorInfo:function(s){a.ajax({url:"/tutor/list.json",type:"POST",data:{currentPage:s},dataType:"json",beforeSend:function(){l.dialog_load("加载中...")},success:function(t){var e,n;l.close_dialog();if(t.ret){s<=1&&a("#tutorList").html("");e=i.pushTutorInfo(t.data.tutors);a("#tutorList").append(e);n=t.data.page;n.totalPage>1&&new o(n.currentPage,n.totalPage,a("#tutorList"),i.loadTutorInfo);i.bindTutorInfoScrollAction();i.bindToTutorDetailAction();i.bindAssignTutorAction()}else l.push_error_message(t.message)}})},init:function(){this.data.isSysadmin="true"==a("#isSysadmin").val();this.data.isLeader="true"==a("#isLeader").val();this.data.action=a("#action").val();this.loadTutorInfo(1)}};i.init()});
define("o",[],function(y,d,r){r.exports=".rDialog{position:fixed;_position:absolute}.rDialog-wrap{position:relative;background:#000;opacity:.7;background-clip:padding-box;border-radius:10px;-moz-border-radius:10px;-o-border-radius:10px;-webkit-border-radius:10px;box-shadow:1px 1px 1px #000;padding:.5em .5em}.rDialog-header-load{text-align:center;background:url(/static/images/0e6e0f46d7504242.gif);background-repeat:no-repeat;background-position:0 0;background-size:100%;width:30px;height:33px;margin:auto}.rDialog-header-alert,.rDialog-header-ok{text-align:center;background:url(/static/images/12dffd74007d31b6.png);background-repeat:no-repeat;background-size:100%;width:33px;height:36px;margin:auto}.rDialog-header-alert{background-position:0 -36px}.rDialog-header-ok{background-position:0 0}.rDialog-content{padding:1em 1em;font-size:1.1em;color:#FFF;overflow:hidden;text-align:center}.rDialog-footer{padding-left:15px;text-align:center}.rDialog-footer a{display:inline-block;margin:0 15px 15px 0;height:32px;line-height:32px;padding:0 30px;font-size:1rem;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}.rDialog-footer a:hover,.rDialog-footer a:link,.rDialog-footer a:visited{color:#fff;text-decoration:none}.rDialog-ok,.rDialog-ok:hover{background:#c70066;color:#fff}.rDialog-cancel,.rDialog-cancel:hover{background:#E6E6E6;color:#A7A7A7}.rDialog-mask{position:fixed;_position:absolute;left:0;top:0;width:100%;height:100%;background:#000;filter:alpha(opacity=30);opacity:.3}"});
define("h",["g","6"],function(i,t,e){var n,o;i("g");n=i("6");o={initPanel:function(){"true"==$("#show_header_left").val()?$("header .header .left").css("visibility","visible"):$("header .header .left").css("visibility","hidden");var i=$("#headerRight").html();n.isNotEmpty(i)&&$("header .header .right").html(i)},initFooterMenu:function(){var i=$("#footerMenuId").val();$("footer .footer_menu").find("."+i).addClass("active")},bindLeftBtnAction:function(){$("header .header .left a").click(function(){var i=$("#returnUrl").val();n.isNotEmpty(i)?window.location.href=i:window.history.go(-1)})},init:function(){this.initPanel();this.bindLeftBtnAction();this.initFooterMenu();$("body").height($("body")[0].clientHeight)}};$(function(){o.init()})});
coolie.chunk(["0"]);