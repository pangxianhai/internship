/*coolie built*/
define("0",["1","5","4","a","6","b","e","7","c"],function(e){var t,a,n,d,i,s;e("1");e("5");e("4");e("a");t=e("6");a=e("b");n=e("e");d=e("7");i=e("c");s={data:{is_student:!1},bind_leave_day_action:function(){$("#beginDay").click(function(){n.WdatePicker({dateFmt:"yyyy-MM-dd"})});$("#endDay").click(function(){n.WdatePicker({dateFmt:"yyyy-MM-dd",minDate:$("#beginDay").val()})})},bind_ask_for_leave_action:function(){$(".student-leave").validator({fields:{"#beginDay":"开始时间:required","#endDay":"结束时间:required","#reason":"请假原因:required"},ok:function(e){e.removeClass("error")},error:function(e,t){e.addClass("error")},submit_target:"#student-leave-btn",valid:function(e){$.ajax({url:"/student/leave/ask_for_leave.json",type:"POST",dataType:"json",data:{beginDay:$("#beginDay").val(),beginTime:$("#beginTime").val(),endDay:$("#endDay").val(),endTime:$("#endTime").val(),leaveType:$("#leaveType").val(),reason:$("#reason").val()},success:function(e){if(e.ret){d.openSample("提示","提交成功");s.load_student_leave_info(a.current_page());d.close(2e3)}else d.openSample("提示",e.message)}})}})},push_student_leave:function(e){var a,n,d=[];for(a=0;a<e.length;++a){n=e[a];d.push("<tr>");d.push("<td>"+n.student.name+"</td>");d.push("<td>"+n.student.studentNumber+"</td>");d.push("<td>"+new Date(n.beginDay).format("yyyy-MM-dd")+n.beginTimeInterval.desc+"</td>");d.push("<td>"+new Date(n.endDay).format("yyyy-MM-dd")+n.endTimeInterval.desc+"</td>");d.push("<td>"+n.leaveType.desc+"</td>");d.push('<td title="'+t.filterNull(s.reason)+'">'+t.substring(n.reason,5)+"</td>");d.push("<td>"+n.leaveStatus.desc+"</td>");d.push("<td>");d.push('<a href="/student/leave/detail/'+n.desId+'.htm">[查看详情]</a>');if(s.data.is_student&&n.isApplying){d.push("<br/>");d.push('<a item="delete" leaveDesId="'+n.desId+'" href="javascript:void(0)">[删除]</a>')}d.push("</td>");d.push("</tr>")}return d.join("")},push_page_data:function(e){if(e.ret){$("#u_data").html(s.push_student_leave(e.data.leaveRecords));$(".page_list").html(a.html(e.data.page));a.turning_page(s.load_student_leave_info);s.bind_delete_leave_action()}},load_student_leave_info:function(e){$.ajax({url:"/student/leave/list.json",type:"POST",data:$.extend(t.getFormData($("#search_form")),{currentPage:e}),dataType:"json",beforeSend:function(){},success:s.push_page_data})},bind_search_action:function(){$("#search_action").click(function(){s.load_student_leave_info(1)})},bind_delete_leave_action:function(){$('a[item="delete"]').unbind("click");$('a[item="delete"]').bind("click",function(){var e=$(this).attr("leaveDesId");d.yesNo("提示","您确定要删除该条请假记录吗?",function(){$.ajax({url:"/student/leave/delete.json",type:"POST",dataType:"json",data:{leaveDesId:e},success:function(e){if(e.ret){d.openSample("提示","操作成功");s.load_student_leave_info(a.current_page());d.close(2e3)}else d.openSample("提示",e.message)}})})})},init:function(){this.data.is_student="true"==$("#isStudent").val();this.bind_leave_day_action();this.bind_ask_for_leave_action();this.load_student_leave_info(1);this.bind_search_action()}};s.init()});
define("5",["1"],function(t,i,n){var e,o,s;t("1");e={init_choice:function(){var t=$("#menu_id").val();$(".menu_list").find("A").each(function(t){$(this);if(this.getAttribute("data")==t){$(this).addClass("current");$(this).removeClass("no_current")}else{$(this).addClass("no_current");$(this).removeClass("current")}},[t])}};o={timer:null,top:0,begin:function(t){o.timer=setInterval(function(){t.css("top",o.top+"px");o.top<-11?o.top=12:o.top-=1},180)},end:function(){null!=o.timer&&clearInterval(o.timer)}};s={tips_show:function(){o.begin($("#bulletin_head_tips"));$("#bulletin_head_tips").hover(function(){o.end()},function(){o.begin($("#bulletin_head_tips"))})}};$(function(){e.init_choice();s.tips_show()});i.get_title=function(){$(".menu").find(".title").val()}});
define("8",[],function(y,d,r){r.exports="@charset \"UTF-8\";.n-error{overflow:hidden;color:red;font-size:12px;display:inline-block}.n-error .n-icon{background:url(/static/images/f66d41752c6b2b20.png) no-repeat;width:16px;height:16px;overflow:hidden;float:left}.n-error .n-msg{line-height:16px}.n-ok{overflow:hidden;background:url(/static/images/f66d41752c6b2b20.png) no-repeat;background-position-x:-16px;color:#390;width:18px;height:16px;display:inline-block;margin-left:5px;font-size:12px}"});
define("9",[],function(y,d,r){r.exports=".dialog-dialog_div{overflow:hidden;display:block;position:fixed;border:1px solid #3f55a0;border-top-right-radius:4px;border-top-left-radius:4px;z-index:1001}.dialog-dialog_div table{border-collapse:collapse;width:100%}.dialog-dialog_div .title{background-color:#3f55a0;overflow:hidden;display:block;height:30px;color:#FFF}.dialog-dialog_div .title span{line-height:35px;margin-left:8px;font-size:14px}.dialog-dialog_div .title .close{float:right;line-height:30px;font-size:25px;margin-right:10px;color:#FFF}.dialog-dialog_div .dialog_content{overflow:hidden;background-color:#FFF;padding-left:10px;word-break:break-all}.dialog-dialog_div .bottom{height:38px;overflow:hidden;background-color:#ccc}.dialog-dialog_div .bottom .no{float:left;margin-left:8px;border-radius:5px}.dialog-dialog_div .bottom .yes{float:right;margin-right:8px;border-radius:5px}"});
coolie.chunk(["0"]);