/*coolie built*/
define("0",["g","a","h","l","6","r","k","m","i"],function(e,l,a){var t,i,n,s,o,c=e("g");e("a");e("h");t=e("l");i=e("6");e("r");n=e("k");s=e("m");e("i");o={push_leave_list_data:function(e){var l,a,t,n=[];for(l=0;l<e.length;++l){a=e[l];t=!1;o.user_id==a.userId&&a.isApplying&&(t=!0);n.push('<li class="leave_node"  leave_record_des_id="'+a.desId+'">');t?n.push('<div class="operate operate_delete" leave_record_des_id="'+a.desId+'">删除</div>'):n.push('<div class="operate"></div>');n.push('<div class="leave_node_show" has_operate="'+t+'" >');n.push('<ul class="leave_record">');n.push("<li>"+new Date(a.beginDay).format("yyyy-MM-dd")+a.beginTimeInterval.desc+"</li>");n.push("<li>"+new Date(a.endDay).format("yyyy-MM-dd")+a.endTimeInterval.desc+"</li>");n.push("<li>");n.push(a.leaveStatus.desc);n.push("</li>");n.push("</ul>");n.push('<ul class="leave_message">');n.push("<li>"+a.student.name+"</li>");n.push("<li>"+a.leaveType.desc+"</li>");n.push("<li>"+i.substring(a.reason,8)+"</li>");n.push("</ul>");n.push("<i></i>");n.push("</div>");n.push("</li>")}c("#leave_list").append(n.join(""));this.bind_scroll_action();this.bind_delete_action();this.bind_leave_to_detail()},bind_delete_action:function(){c("#leave_list .leave_node .operate").unbind("click");c("#leave_list .leave_node .operate").bind("click",function(){var e=c(this);e.hasClass("operate_delete")&&o.delete_leave_record(e)})},delete_leave_record:function(e){t.yes_no("您确定要删除该请假信息吗?",function(){c.ajax({url:"/student/leave/delete.json",type:"POST",dataType:"json",data:{leaveDesId:e.attr("leave_record_des_id")},success:function(l){if(l.ret){t.push_ok_message("操作成功");e.parent().hide()}else t.push_error_message(l.message)}})})},bind_scroll_action:function(){c("#leave_list .leave_node .leave_node_show").each(function(){var e,l,a=c(this);if("true"==a.attr("has_operate")){e=a.parent().find(".operate");l=e.width();new n({target_node:a,h_scroll:!0,max_scroll:l,start_event_callback:function(l){e.css("visibility","visible")},move_event_callback:function(e){},end_callback:function(t){var i=t.range,n=t.swipe_direction(i);if("_left"==n&&Math.abs(i.x1-i.x2)>=l/2)a.css({transform:"translate(-"+l+"px, 0px) scale(1) translateZ(0px)"});else{a.css({transform:"translate(0px, 0px) scale(1) translateZ(0px)"});e.css("visibility","hidden")}}})}})},bind_leave_to_detail:function(){c("#leave_list .leave_node").off("click");c("#leave_list .leave_node").on("click",function(){window.location.href="/webApp/student/leave/detail/"+c(this).attr("leave_record_des_id")+".htm?returnUrl="+encodeURIComponent(location.href)})},load_leave_list:function(e){c.ajax({url:"/student/leave/list.json",type:"POST",data:c.extend(i.getFormData(c("#leaveSelectForm")),{currentPage:e}),dataType:"json",beforeSend:function(){t.dialog_load("正在加载请假记录...")},success:function(l){t.close_dialog();if(l.ret){e<=1&&c("#leave_list").html("");o.push_leave_list_data(l.data.leaveRecords);var a=l.data.page;s.loadSinglePage(a.currentPage,a.totalPage,c("#leave_list"),o.load_leave_list)}else t.push_error_message(l.message)}})},openSelectPanel:function(){this.selectPanel=c("#leaveSelectNode").panel({contentWrap:c("#leave_list_panel"),sourcePanelSwitch:!1,closeFunction:function(){c(".cover_panel").hide()}})},bindOpenSelectPanelAction:function(){var e=c("#selectBtn");e.off("click");e.on("click",function(){o.openSelectPanel();c(".cover_panel").show()})},bindConfirmSelectPanelAction:function(){c('#leaveSelectNode button[item="confirm"]').click(function(e){e.preventDefault();o.load_leave_list(1);o.selectPanel.closePanel()});c('#leaveSelectNode button[item="reset"]').click(function(e){e.preventDefault();c("#leaveSelectNode").find("input").val("");c("#leaveSelectNode").find("select").val("")})},init:function(){this.user_id=c("#user_id").val();this.load_leave_list(1);this.bindOpenSelectPanelAction();this.bindConfirmSelectPanelAction()}};o.init()});
define("h",["g","6"],function(i,t,e){var n,o;i("g");n=i("6");o={initPanel:function(){"true"==$("#show_header_left").val()?$("header .header .left").css("visibility","visible"):$("header .header .left").css("visibility","hidden");var i=$("#headerRight").html();n.isNotEmpty(i)&&$("header .header .right").html(i)},initFooterMenu:function(){var i=$("#footerMenuId").val();$("footer .footer_menu").find("."+i).addClass("active")},bindLeftBtnAction:function(){$("header .header .left a").click(function(){var i=$("#returnUrl").val();n.isNotEmpty(i)?window.location.href=i:window.history.go(-1)})},init:function(){this.initPanel();this.bindLeftBtnAction();this.initFooterMenu();$("body").height($("body")[0].clientHeight)}};$(function(){o.init()})});
define("o",[],function(y,d,r){r.exports=".rDialog{position:fixed;_position:absolute}.rDialog-wrap{position:relative;background:#000;opacity:.7;background-clip:padding-box;border-radius:10px;-moz-border-radius:10px;-o-border-radius:10px;-webkit-border-radius:10px;box-shadow:1px 1px 1px #000;padding:.5em .5em}.rDialog-header-load{text-align:center;background:url(/static/images/0e6e0f46d7504242.gif);background-repeat:no-repeat;background-position:0 0;background-size:100%;width:30px;height:33px;margin:auto}.rDialog-header-alert,.rDialog-header-ok{text-align:center;background:url(/static/images/12dffd74007d31b6.png);background-repeat:no-repeat;background-size:100%;width:33px;height:36px;margin:auto}.rDialog-header-alert{background-position:0 -36px}.rDialog-header-ok{background-position:0 0}.rDialog-content{padding:1em 1em;font-size:1.1em;color:#FFF;overflow:hidden;text-align:center}.rDialog-footer{padding-left:15px;text-align:center}.rDialog-footer a{display:inline-block;margin:0 15px 15px 0;height:32px;line-height:32px;padding:0 30px;font-size:1rem;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}.rDialog-footer a:hover,.rDialog-footer a:link,.rDialog-footer a:visited{color:#fff;text-decoration:none}.rDialog-ok,.rDialog-ok:hover{background:#c70066;color:#fff}.rDialog-cancel,.rDialog-cancel:hover{background:#E6E6E6;color:#A7A7A7}.rDialog-mask{position:fixed;_position:absolute;left:0;top:0;width:100%;height:100%;background:#000;filter:alpha(opacity=30);opacity:.3}"});
coolie.chunk(["0"]);