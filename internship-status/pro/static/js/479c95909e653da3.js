/*coolie built*/
define("0",["1","5","a","b","6","7"],function(t){var e,a,d,s;t("1");t("5");t("a");e=t("b");a=t("6");d=t("7");s={data:{action:"",is_sysadmin:!1,is_leader:!1},bind_page_action:function(){e.turning_page(s.load_tutor_info)},push_tutor_info:function(t){var e,d,s=[];for(e=0;e<t.length;++e){d=t[e];s.push("<tr>");s.push("<td>"+d.name+"</td>");s.push("<td>"+d.userInfo.userName+"</td>");s.push("<td>"+d.userInfo.phone+"</td>");s.push("<td>"+d.userInfo.sex.desc+"</td>");s.push('<td><a href="/company/detail/'+d.companyDestId+'.htm">'+d.companyName+"</a></td>");s.push("<td>"+d.department+"</td>");s.push("<td>"+d.tutorType.desc+"</td>");s.push("<td>"+a.filterString(d.studentNumber,"0")+"</td>");s.push("<td>"+new Date(d.createdTime).format("yyyy-MM-dd")+"</td>");if("addStudent"==this.data.action||this.data.is_sysadmin||this.data.is_leader){s.push("<td>");if("addStudent"==this.data.action)s.push('<a item="addStudent" tutorName="'+d.name+'"  tutorId="'+d.desId+'" href="javascript:void(0)">[分配]</a>');else if(this.data.is_sysadmin){d.isLeader||s.push('<a item="setLeader" desId="'+d.desId+'" href="javascript:void(0)">[设为负责人]</a><br/>');s.push('<a item="delete" desId="'+d.desId+'" href="javascript:void(0)">[删除]</a>')}else this.data.is_leader&&!d.leader&&s.push('<a item="delete" desId="'+d.desId+'" href="javascript:void(0)">[删除]</a>');s.push("</td>")}s.push("</tr>")}return s.join("")},push_page_data:function(t){if(t.ret){$("#u_data").html(s.push_tutor_info(t.data.tutors));$(".page_list").html(e.html(t.data.page));s.bind_page_action();s.bind_add_student_action();s.bind_set_leader_action();s.bind_delete_tutor_action()}},set_leader:function(t){$.ajax({url:"/tutor/setLeader.json",type:"POST",dataType:"json",data:{tutorDesId:t},success:function(t){if(t.ret){d.openSample("提示","操作成功");s.load_tutor_info(e.current_page());d.close(2e3)}else d.openSample("提示",t.message)}})},bind_set_leader_action:function(){$('a[item="setLeader"]').unbind("click");$('a[item="setLeader"]').bind("click",function(){var t=this.getAttribute("desId");$.ajax({url:"/tutor/checkCompanyHasLeader.json",type:"POST",dataType:"json",data:{tutorDesId:t},success:function(e){e.ret?e.data?s.set_leader(t):d.yesNo("提示","该单位已经有负责人了！你确定要更改负责人么？",function(){s.set_leader(t)}):d.openSample("提示",e.message)}})})},bind_delete_tutor_action:function(){$('a[item="delete"]').unbind("click");$('a[item="delete"]').bind("click",function(){var t=$(this).attr("desId");d.yesNo("提示","您确定要删除该指导老师吗？",function(){$.ajax({url:"/tutor/delete.json",type:"POST",dataType:"json",data:{destId:t},success:function(t){if(t.ret){d.openSample("提示","删除成功!");s.load_tutor_info(e.current_page());d.close(2e3)}else d.openSample("提示",t.message)}})})})},bind_add_student_action:function(){var t=$('a[item="addStudent"]');t.unbind("click");t.bind("click",function(){var t=this;d.yesNo("提示","您确定将该学生分配给"+this.getAttribute("tutorName")+"吗？",function(){d.close(1);s.add_student(t.getAttribute("tutorId"))})})},add_student:function(t){$.ajax({url:"/student/updateTutor.json",type:"POST",dataType:"json",data:{tutorDestId:t,studentDestId:$("#studentId").val()},success:function(t){if(t.ret){t.data==$("#studentId").val().split(",").length?d.openSample("提示","分配成功"):d.openSample("提示","部分学生操作成功，您这个成功操作了"+t.data+"个学生");setTimeout(function(){d.close(1);window.location.href="/student/list.htm"},2e3)}else d.openSample("提示",t.message)}})},load_tutor_info:function(t){$.ajax({url:"/tutor/list.json",type:"POST",data:$.extend(a.getFormData($("#search_form")),{currentPage:t}),dataType:"json",beforeSend:function(){},success:s.push_page_data})},bind_search_action:function(){$("#search_action").click(function(){s.load_tutor_info(1)})},init:function(){this.data.action=$("#action").val();this.data.is_sysadmin="true"==$("#isSysadmin").val();this.data.is_leader="true"==$("#isLeader").val();this.load_tutor_info(1);this.bind_search_action()}};s.init()});
define("5",["1"],function(t,i,n){var e,o,s;t("1");e={init_choice:function(){var t=$("#menu_id").val();$(".menu_list").find("A").each(function(t){$(this);if(this.getAttribute("data")==t){$(this).addClass("current");$(this).removeClass("no_current")}else{$(this).addClass("no_current");$(this).removeClass("current")}},[t])}};o={timer:null,top:0,begin:function(t){o.timer=setInterval(function(){t.css("top",o.top+"px");o.top<-11?o.top=12:o.top-=1},180)},end:function(){null!=o.timer&&clearInterval(o.timer)}};s={tips_show:function(){o.begin($("#bulletin_head_tips"));$("#bulletin_head_tips").hover(function(){o.end()},function(){o.begin($("#bulletin_head_tips"))})}};$(function(){e.init_choice();s.tips_show()});i.get_title=function(){$(".menu").find(".title").val()}});
define("9",[],function(y,d,r){r.exports=".dialog-dialog_div{overflow:hidden;display:block;position:fixed;border:1px solid #3f55a0;border-top-right-radius:4px;border-top-left-radius:4px;z-index:1001}.dialog-dialog_div table{border-collapse:collapse;width:100%}.dialog-dialog_div .title{background-color:#3f55a0;overflow:hidden;display:block;height:30px;color:#FFF}.dialog-dialog_div .title span{line-height:35px;margin-left:8px;font-size:14px}.dialog-dialog_div .title .close{float:right;line-height:30px;font-size:25px;margin-right:10px;color:#FFF}.dialog-dialog_div .dialog_content{overflow:hidden;background-color:#FFF;padding-left:10px;word-break:break-all}.dialog-dialog_div .bottom{height:38px;overflow:hidden;background-color:#ccc}.dialog-dialog_div .bottom .no{float:left;margin-left:8px;border-radius:5px}.dialog-dialog_div .bottom .yes{float:right;margin-right:8px;border-radius:5px}"});
coolie.chunk(["0"]);