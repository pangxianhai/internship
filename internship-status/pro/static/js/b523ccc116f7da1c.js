/*coolie built*/
define("0",["1","5","4","6","7"],function(t){var e,a,n,s=t("1");t("5");t("4");e=t("6");a=t("7");n={buildDepartmentShowHtml:function(t){var a,n,s,i=[];for(a=0;a<t.length;++a){n=t[a];i.push('<tr level="'+n.level+'">');i.push('<td class="name">');for(s=0;s<n.level;++s)i.push('<span class="_icon _line"></span>');n.isLeafDepartment?a==t.length-1?i.push('<span class="_icon _join_bottom"></span>'):i.push('<span class="_icon _join"></span>'):i.push('<span class="_icon _plus" departmentDesId="'+n.desId+'"></span>');i.push('<span item="nameNode" class="_name">'+n.departmentName+"</span>");i.push("</td>");i.push("<td>"+n.departmentType.desc+"</td>");i.push("<td>"+e.filterString(n.departmentPath,"-")+"</td>");i.push("<td>");i.push('<a href="javascript:void(0)" item="update" departmentDesId="'+n.desId+'">[修改]</a>');n.isSpeciality||i.push('<a href="/university/add.htm?parentDesId='+n.desId+'" >[添加]</a>');i.push("</td>");i.push("</tr>")}return i.join("")},buildDepartmentSearchResultHtml:function(t){var a,n,s=[];for(a=0;a<t.length;++a){n=t[a];s.push("<tr>");s.push('<td class="name">');a==t.length-1?s.push('<span class="_icon _join_bottom"></span>'):s.push('<span class="_icon _join"></span>');s.push('<span item="nameNode" class="_name">'+n.departmentName+"</span>");s.push("</td>");s.push("<td>"+n.departmentType.desc+"</td>");s.push("<td>"+e.filterString(n.departmentPath,"-")+"</td>");s.push("<td>");s.push('<a href="javascript:void(0)" item="update" departmentDesId="'+n.desId+'">修改</a>');s.push("</td>");s.push("</tr>")}return s.join("")},bindDepartmentPlusAction:function(){var t=s("#u_data ._plus");t.off("click");t.on("click",function(){var t,e,a=s(this),i=a.parent().parent();if(a.hasClass("_minus")){a.removeClass("_minus");n.eachDepartmentNextAllNode(i,function(t){t.hide()})}else{a.addClass("_minus");t=!1;n.eachDepartmentNextAllNode(i,function(e,a){if(1==a){t=!0;e.find(".name ._plus").removeClass("_minus");e.show()}});if(!t){e=a.attr("departmentDesId");n.loadUniversityDepartment(e,function(t){a.parent().parent().after(t)})}}})},bindUpdateAction:function(){var t=s('#u_data A[item="update"]');t.off("click");t.on("click",function(){var t=s(this);t.find("input").val("");s("#updatePanel").dialog({title:"您正在修改-"+t.parent().parent().find('[item="nameNode"]').html(),width:320});s("#updateForm").validator({fields:{'[name="departmentName"]':"部门名称:required;length[1~50]"},submit_target:"#updateSubmit",valid:function(n){s.ajax({url:"/university/update.json",type:"POST",data:s.extend(e.getFormData(n),{desId:t.attr("departmentDesId")}),dataType:"json",success:function(t){if(t.ret){a.openSample("系统提示","修改成功");setTimeout(function(){window.location.reload(!0)},1e3)}else a.openSample("系统提示",t.message)}})}})})},eachDepartmentNextAllNode:function(t,e){t.nextAll().each(function(a,n){var i=parseInt(s(n).attr("level")),r=parseInt(t.attr("level"));if(i<=r)return!1;e(s(n,i-r))})},loadUniversityDepartment:function(t,e){s.ajax({url:"/university/search.json",type:"POST",data:{parentDesId:t},dataType:"json",success:function(t){if(t.ret){var s=n.buildDepartmentShowHtml(t.data);"function"==typeof e&&e(s);n.bindDepartmentPlusAction();n.bindUpdateAction()}else a.openSample("系统提示",t.message)}})},bindSearchAction:function(){s("#searchBtn").click(function(){var t,i=e.getFormData(s("#search_form")),r=!0;for(t in i)if(e.isNotEmpty(i[t])){r=!1;break}r?n.loadUniversityDepartment("",function(t){s("#u_data").html(t)}):s.ajax({url:"/university/search.json",type:"POST",data:s.extend(e.getFormData(s("#search_form")),{action:"search"}),dataType:"json",success:function(t){if(t.ret){var e=n.buildDepartmentSearchResultHtml(t.data);s("#u_data").html(e)}else a.openSample("系统提示",t.message)}})})},init:function(){this.loadUniversityDepartment("",function(t){s("#u_data").html(t)});this.bindSearchAction()}};n.init()});
define("5",["1"],function(t,i,n){var e,o,s;t("1");e={init_choice:function(){var t=$("#menu_id").val();$(".menu_list").find("A").each(function(t){$(this);if(this.getAttribute("data")==t){$(this).addClass("current");$(this).removeClass("no_current")}else{$(this).addClass("no_current");$(this).removeClass("current")}},[t])}};o={timer:null,top:0,begin:function(t){o.timer=setInterval(function(){t.css("top",o.top+"px");o.top<-11?o.top=12:o.top-=1},180)},end:function(){null!=o.timer&&clearInterval(o.timer)}};s={tips_show:function(){o.begin($("#bulletin_head_tips"));$("#bulletin_head_tips").hover(function(){o.end()},function(){o.begin($("#bulletin_head_tips"))})}};$(function(){e.init_choice();s.tips_show()});i.get_title=function(){$(".menu").find(".title").val()}});
define("8",[],function(y,d,r){r.exports="@charset \"UTF-8\";.n-error{overflow:hidden;color:red;font-size:12px;display:inline-block}.n-error .n-icon{background:url(/static/images/f66d41752c6b2b20.png) no-repeat;width:16px;height:16px;overflow:hidden;float:left}.n-error .n-msg{line-height:16px}.n-ok{overflow:hidden;background:url(/static/images/f66d41752c6b2b20.png) no-repeat;background-position-x:-16px;color:#390;width:18px;height:16px;display:inline-block;margin-left:5px;font-size:12px}"});
define("9",[],function(y,d,r){r.exports=".dialog-dialog_div{overflow:hidden;display:block;position:fixed;border:1px solid #3f55a0;border-top-right-radius:4px;border-top-left-radius:4px;z-index:1001}.dialog-dialog_div table{border-collapse:collapse;width:100%}.dialog-dialog_div .title{background-color:#3f55a0;overflow:hidden;display:block;height:30px;color:#FFF}.dialog-dialog_div .title span{line-height:35px;margin-left:8px;font-size:14px}.dialog-dialog_div .title .close{float:right;line-height:30px;font-size:25px;margin-right:10px;color:#FFF}.dialog-dialog_div .dialog_content{overflow:hidden;background-color:#FFF;padding-left:10px;word-break:break-all}.dialog-dialog_div .bottom{height:38px;overflow:hidden;background-color:#ccc}.dialog-dialog_div .bottom .no{float:left;margin-left:8px;border-radius:5px}.dialog-dialog_div .bottom .yes{float:right;margin-right:8px;border-radius:5px}"});
coolie.chunk(["0"]);